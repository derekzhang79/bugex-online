{% extends "bugex_webapp/base_with_registration.html" %} 

{% block title %}BugEx Main Page{% endblock title %} {% block content %}

<div class="container-fluid">
	<div class="row-fluid">
		<div class="span1"></div>
		<div class="span1"></div>
		<div class="span8">
		{% if user.is_authenticated %}
			<div id="welcomeText">
				<h1>BugEx is a bug explanation tool that has been developed
					with the goal to support you with additional information about a
					failure such that you can easily understand the underlying problem.</h1>
				<h1>
					Tutorial for BugEx Online can be found on <a href="{% url howto %}">HowTo</a>
				</h1>
			</div>
			<div class="row-fluid">
				<div class="span6">
                                    	<script>
                                        $(document).ready(function() {
                                			// validate signin form on keyup and submit
                              				var validator = $("#signInForm").validate({
                                          		rules: {
		                                            email: { required: true, email: true },
		                                  			password: { required: true, minlength: 6 }
		                                        },
                                          		messages: {
                                              		email: { required: "Enter an Email address", minlength: "Enter a valid email address" },
                                        			password: { required: "Provide a password", rangelength: jQuery.format("Enter at least {6} characters") }                                                	
                                          		},
                                          		// the errorPlacement has to take the table layout into account
                                          		errorPlacement: function(error, element) {
	                                                  error.appendTo( element.parent().next() );
                                          		},
                              					// specifying a submitHandler prevents the default submit, good for the demo
                              					submitHandler: function() {
                              						$('#informingText').fadeIn('slow');
                              					},
                              					// set this class to error-labels to indicate valid fields
                              					success: function(label) {
                              					// set &nbsp; as text for IE
                              						label.html("&nbsp;").addClass("checked");
                              					}
                              				});
                              	        });
                                    	</script>				
					<div id="leftColumnMain">
						<form action="" method="POST" id="signInForm" autocomplete="off" enctype="multipart/form-data">{% csrf_token %}
							<table>
								<tr>
									<td class="label"><label id="lemail" for="email">Your email:</label></td>
									<td class="field"><input type="text" id="email" name="email" value="" /></td>
									<td class="status"></td>
								</tr>
								<tr>
									<td class="label"><label id="lpassword" for="password">Your password:</label></td>
									<td class="field"><input type="text" id="password" name="password" /></td>
									<td class="status"></td>
								</tr>
								<tr>
									<td class="field" colspan="2">
										<button class="btn btn-primary" type="submit" value="Sign in" title="Sign in"></button>
									</td>
								</tr>
							</table>
						</form>
                                    	<script>
                                        	$(document).ready(function() {						
						  						$("#registerForm").hide();  
  												$("span.register").click(function() {
    												$('#registerForm').toggle(); });
                                  	        });
                                    	</script>	
						<ul><li><a href="#"><span class="register">Register!</span></a></li><li><a href="#"><span class="forgotPassword">Forgot password</a></li></ul>
						<form action="" method="POST" id="forgotPasswordForm" autocomplete="off" enctype="multipart/form-data">{% csrf_token %}
							<table>
								<tr>
									<td class="label"><label id="lemailForgotPass" for="emailForgotPass">Your email:</label></td>
									<td class="field"><input type="text" id="emailForgotPass" name="emailForgotPass" value="" /></td>
									<td class="status"></td>
								</tr>
								<p>A new password will be sent to your email address</p>
								<tr>
									<td class="field" colspan="2">
										<button class="btn btn-primary" type="submit" value="Reset password" title="Reset password"></button>
									</td>
								</tr>									
							</table>
						</form>	
					</div>
				</div>
				<div class="span6">
					<div id="mainPageForm">
						<form action="" method="POST" id="registerForm" autocomplete="off" enctype="multipart/form-data">{% csrf_token %}
							<table>
								<tr>
									<td class="label"><label id="lnameRegister" for="nameRegister">Your name (optional):</label></td>
									<td class="field"><input type="text" id="nameRegister" name="nameRegister" value="" /></td>
									<td class="status"></td>
								</tr>	
								<tr>
									<!-- To be implemented, the CAPTCHA functionality -->
								</tr>															
								<tr>
									<td class="label"><label id="lemailRegister" for="emailRegister">Your email:</label></td>
									<td class="field"><input type="text" id="emailRegister" name="emailRegister" value="" /></td>
									<td class="status"></td>
								</tr>
								<p>Your password will be sent to you via email</p>
								<tr>
									<td class="field" colspan="2">
										<button class="btn btn-primary" type="submit" value="Sign Up" title="Sign Up"></button>
									</td>
								</tr>									
							</table>
						</form>								
					</div>
				</div>
			</div>
		{% else %}
			<p>Welcome to BugEx Online {{ user.name|default:"User" }}</p>
			<div class="row-fluid">
                                <div class="span6">
                                    <div id="leftColumnMain">
                                        <h2>Project</h2>
                                        <p>blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah </p>
                                        <h2>FTCMN</h2>
                                        <p>blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah </p>
                                    </div>
                                </div>
                                <div class="span6">
                                    <div id="mainPageForm">
                                    	<h2>Input Form</h2>
                                    	<script>
                                        $(document).ready(function() {
                                			// validate signup form on keyup and submit
                              				var validator = $("#uploadForm").validate({
                                          		rules: {
		                                              email: { required: true, email: true },
		                                              fctmn: { required: true },
		                                              projectFile: { required: true },
		                                              copyrights: { required: true }
		                                        },
                                          		messages: {
                                              		email: { required: "Enter an Email address", minlength: "Enter a valid email address" },
                              						projectFile: { required: "Give the project files" },
                                                	copyrights: { required: "Specify that you have the copyrights for this code" },
                                              		fctmn: { required: "Specify the FCTMN" }
                                          		},
                                          		// the errorPlacement has to take the table layout into account
                                          		errorPlacement: function(error, element) {
	                                                  if ( element.is(":radio") )
	                                                          error.appendTo( element.parent().next().next() );
	                                                  else if ( element.is(":checkbox") )
	                                                          error.appendTo ( element.next() );
	                                                  else error.appendTo( element.parent().next() );
                                          		},
                              					// specifying a submitHandler prevents the default submit, good for the demo
                              					submitHandler: function() {
                              						$('#informingText').fadeIn('slow');
                              					},
                              					// set this class to error-labels to indicate valid fields
                              					success: function(label) {
                              					// set &nbsp; as text for IE
                              						label.html("&nbsp;").addClass("checked");
                              					}
                              				});
                              	        });
                                    	</script>
                                    	    <form action="/upload/" method="post">{% csrf_token %}
        										{% comment %} {{ form.as_p }} {% endcomment %}
        										    <form action="" method="POST" id="uploadForm" autocomplete="off" enctype="multipart/form-data">
											            <table>
											                <tr>
											                    <td class="label"><label id="lemail" for="email">Your Email:</label></td>
											                    <td class="field"><input type="text" id="email" name="email" value=""/></td>
											                    <td class="status"></td>
											                </tr>
											                <tr>
											                    <td class="label"><label id="lproject" for="projectFile">Project:</label></td>
											                    <td class="field"><input type="file" id="projectFile" name="projectFile"/></td>
											                    <td class="status"></td>
											                </tr>  
											                <tr>
											                    <td class="label"><label id="lftcmn" for="fctmn">FTCMN:</label></td>
											                    <td class="field"><input type="text" id="fctmn" name="fctmn" value=""/></td>
											                    <td class="status"></td>
											                </tr>                
											                <tr>
											                    <td class="label"><label id="lcopyrights" for="copyrights">Copyrights</label></td>
											                    <td class="field" colspan="2">
											                        <div id="copyrightswrap">
											                            <input type="checkbox" id="copyrights"  name="copyrights" />
											                            <label id="lcopyrightText" for="copyrights">I own the copyrights for this project</label>
											                        </div>
											                    </td>
											                </tr>             
											                <tr>
											                    <td class="field" colspan="2">
											                    <button class="btn btn-primary" type="submit" value="Submit" title="Submit"></button>
											                    </td>
											                </tr>                
											            </table>
                      									<div id="informingText">Uploading... Please do not close the Browser!</div>
          											</form>
        										<!--<button class="btn btn-primary" type="submit" value="Submit" title="Submit"></button>-->
        										<!-- <div id="informingText"><p>Uploading...</p><p>Please do not close the Browser!</p></div> -->
    										</form>
                                    </div>
                                </div>
                            </div>
					{% endif %}
		</div>
	</div>
</div>

{% endblock content %}
