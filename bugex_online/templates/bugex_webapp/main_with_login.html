{% extends "bugex_webapp/base_with_registration.html" %} 

{% block title %}BugEx Main Page{% endblock title %} {% block content %}

<div class="container-fluid">
	<div class="row-fluid">
		<div class="span1"></div>
		<div class="span1"></div>
		<div class="span8">
		{% comment %}{% if user.is_authenticated %}{% endcomment %}
			<div id="welcomeText">
				<h1>BugEx is a bug explanation tool that has been developed
					with the goal to support you with additional information about a
					failure such that you can easily understand the underlying problem.</h1>
				<h1>
					Tutorial for BugEx Online can be found on <a href="{% url howto-page %}">HowTo</a>
				</h1>
			</div>
			<div class="row-fluid">
				<div class="span6">			
					<div id="leftColumnMain">
{% if form.is_multipart %}
            <form class="form-horizontal" enctype="multipart/form-data" method="post" accept-charset="UTF-8" action="">{% csrf_token %}
        {% else %}
            <form class="form-horizontal" method="post" accept-charset="UTF-8" action="">{% csrf_token %}
        {% endif %}


        {% if messages %}

            {% for message in messages %}
                {% if message.tags == 'success' %}
                    <div class="alert alert-success fade in">
                        <a class="close" data-dismiss="alert" href="#">&times;</a>
                        {{ message }}
                    </div>
                {% endif %}

                {% if message.tags == 'error' %}
                    <div class="alert alert-error fade in">
                        <a class="close" data-dismiss="alert" href="#">&times;</a>
                        {{ message }}
                    </div>
                {% endif %}

            {% endfor %}

        {% endif %}

        <fieldset>

            {% for field in form %}

                {% if field.errors %}
                    <div class="control-group error">
                {% else %}
                    <div class="control-group">
                {% endif %}

                <label class="control-label" for="{{ field.label }}">{{ field.label }} <p class="help-block">({{ field.help_text }})</p></label>


                <div class="controls">
                    {{ field }}
                    
                    {% for error in field.errors %}
                        <span class="label label-important">{{ error }}</span>
                    {% endfor %}
                </div> </div>
            {% endfor %}

            <div class="form-actions">

                <button type="submit" class="btn btn-primary"><i class="icon-ok icon-white"></i> Submit</button>
                <button type="reset" class="btn"><i class="icon-remove"></i> Reset form</button>
            </div>
        </fieldset>
        </form>
                                    	<script>
                                        	$(document).ready(function() {						
						  						$("#registerForm").hide();  
  												$("span.register").click(function() {
    												$('#registerForm').toggle(); });
                                  	        });
                                    	</script>	
						<ul><li><a href="#"><span class="register">Register!</span></a></li><li><a href="#"><span class="forgotPassword">Forgot password</a></li></ul>
					</div>
				</div>
				<div class="span6">
					<div id="mainPageForm">
						<form action="" method="POST" id="registerForm" autocomplete="off" enctype="multipart/form-data">{% csrf_token %}
							<table>
								<tr>
									<td class="label"><label id="lnameRegister" for="nameRegister">Your name (optional):</label></td>
									<td class="field"><input type="text" id="nameRegister" name="nameRegister" value="" /></td>
									<td class="status"></td>
								</tr>	
								<tr>
									<!-- To be implemented, the CAPTCHA functionality -->
								</tr>															
								<tr>
									<td class="label"><label id="lemailRegister" for="emailRegister">Your email:</label></td>
									<td class="field"><input type="text" id="emailRegister" name="emailRegister" value="" /></td>
									<td class="status"></td>
								</tr>
								<p>Your password will be sent to you via email</p>
								<tr>
									<td class="field" colspan="2">
										<button class="btn btn-primary" type="submit" value="Sign Up" title="Sign Up"></button>
									</td>
								</tr>									
							</table>
						</form>								
					</div>
				</div>
			</div>
		{%comment %} {% else %} 
			<p>Welcome to BugEx Online {{ user.name|default:"User" }}</p>
			<div class="row-fluid">
                                <div class="span6">
                                    <div id="leftColumnMain">
                                        <h2>Project</h2>
                                        <p>blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah </p>
                                        <h2>FTCMN</h2>
                                        <p>blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah </p>
                                    </div>
                                </div>
                                <div class="span6">
                                    <div id="mainPageForm">
                                    	<h2>Input Form</h2>
{% if form.is_multipart %}
            <form class="form-horizontal" enctype="multipart/form-data" method="post" accept-charset="UTF-8" action="">{% csrf_token %}
        {% else %}
            <form class="form-horizontal" method="post" accept-charset="UTF-8" action="">{% csrf_token %}
        {% endif %}


        {% if messages %}

            {% for message in messages %}
                {% if message.tags == 'success' %}
                    <div class="alert alert-success fade in">
                        <a class="close" data-dismiss="alert" href="#">&times;</a>
                        {{ message }}
                    </div>
                {% endif %}

                {% if message.tags == 'error' %}
                    <div class="alert alert-error fade in">
                        <a class="close" data-dismiss="alert" href="#">&times;</a>
                        {{ message }}
                    </div>
                {% endif %}

            {% endfor %}

        {% endif %}

        <fieldset>

            {% for field in form %}

                {% if field.errors %}
                    <div class="control-group error">
                {% else %}
                    <div class="control-group">
                {% endif %}

                <label class="control-label" for="{{ field.label }}">{{ field.label }} <p class="help-block">({{ field.help_text }})</p></label>


                <div class="controls">
                    {{ field }}
                    
                    {% for error in field.errors %}
                        <span class="label label-important">{{ error }}</span>
                    {% endfor %}
                </div> </div>
            {% endfor %}

            <div class="form-actions">

                <button type="submit" class="btn btn-primary"><i class="icon-ok icon-white"></i> Submit</button>
                <button type="reset" class="btn"><i class="icon-remove"></i> Reset form</button>
            </div>
        </fieldset>
        </form>
                                    </div>
                                </div>
                            </div>
					{% endif %} {% endcomment %}
		</div>
	</div>
</div>

{% endblock content %}
